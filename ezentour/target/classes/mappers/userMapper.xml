<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 다른 mapper와 중복되지 않도록 네임스페이스 기재 -->
<mapper namespace="user">
	<!-- resultType을 alias 처리하기 위해서는 src/main/resources/mybatis-config.xml에서 설정하기 -->
	<!-- 1.장바구니 삽입 -->
		<insert id="cart_insert" >
		insert into shopping_carts  
		values((select NVL(MAX(s_no)+1, 1) from shopping_carts),#{s_h_no},#{s_m_id},TO_DATE(#{s_checkin},'dd/MM/yy'),TO_DATE(#{c_checkout},'dd/MM/yy'))
	</insert>
	
	<!-- 2.장바구니 뷰 -->
		<!-- <select id="cart_View" resultType="cartDto" >
		select * from shopping_carts
	</select> -->
	
	<!-- 3.장바구니 뷰 -->
	<select id="cart_innerJoinView" resultType="cartDto">
		select 
		shopping_carts.s_no,hotel.h_name,shopping_carts.s_checkin,
		shopping_carts.c_checkout,hotel.h_img,member.m_id,hotel.h_no  
		from shopping_carts
		inner join hotel
		on shopping_carts.s_h_no=hotel.h_no
		inner join member
		on shopping_carts.s_m_id=member.m_id and member.m_id=#{m.id} 
		order by shopping_carts.s_no 
	</select>
</mapper>







